(()=>{var e=new Set(Array.from(document.querySelectorAll(".tile")).map(e=>e.dataset.type)),t=document.getElementById("type-select");if(t){const a=document.createElement("option");a.value="",a.textContent="All Types",t.appendChild(a),e.forEach(e=>{const a=document.createElement("option");a.value=e,a.textContent=e,t.appendChild(a)})}function a(){const e=document.getElementById("size-select");if(e){e.innerHTML="";const t=Array.from(document.querySelectorAll(".tile")).filter(e=>"none"!==e.style.display),a=new Set;t.forEach(e=>{try{JSON.parse(e.dataset.variants||"[]").forEach(e=>a.add(e))}catch(t){console.warn("Invalid size data:",e.dataset.variants)}});const n=document.createElement("option");n.value="",n.textContent="All Sizes",e.appendChild(n),a.forEach(t=>{const a=document.createElement("option");a.value=t,a.textContent=t,e.appendChild(a)})}}a(),t&&t.addEventListener("change",function(){const e=this.value;document.querySelectorAll(".tile").forEach(t=>{const a=t.dataset.type;t.style.display=""===e||a===e?"":"none"}),a()});var n=document.getElementById("sort-select"),o=document.getElementById("tile-container");n&&n.addEventListener("change",function(){const e=Array.from(o.querySelectorAll(".tile"));if("price-asc"===this.value)e.sort((e,t)=>parseFloat(e.dataset.price)-parseFloat(t.dataset.price));else{if("price-desc"!==this.value)return;e.sort((e,t)=>parseFloat(t.dataset.price)-parseFloat(e.dataset.price))}e.forEach(e=>o.appendChild(e))});var c=document.getElementById("size-select");c&&c.addEventListener("change",function(){const e=this.value,t=document.querySelectorAll(".tile");t.forEach(e=>{e.style.display=""}),t.forEach(t=>{const a=JSON.parse(t.dataset.variants||"[]"),n=""===e||a.includes(e);"none"===t.style.display||(t.style.display=n?"":"none")})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".variant-option"),t=document.getElementById("addToCart");e.forEach(a=>{a.addEventListener("click",function(){e.forEach(e=>e.classList.remove("active")),this.classList.contains("sold-out")?t.disabled=!0:(t.disabled=!1,this.classList.add("active"))})}),1===e.length&&(t.disabled=!1,e[0].classList.add("active"))});var l=document.getElementById("addToCart");l&&l.addEventListener("click",()=>{!function(e){const t=JSON.parse(localStorage.getItem("myIds"))||[];t.includes(e)||(t.push(e),localStorage.setItem("myIds",JSON.stringify(t)))}(document.querySelector(".variant-option.active").dataset.id),document.getElementById("cartModal").style.display="flex"})})();